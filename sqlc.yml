version: "2"
plugins:
- name: golang
  wasm:
    url: https://github.com/rustic-beans/sqlc-gen-go/releases/download/methods/sqlc-gen-go.wasm
    sha256: 9846a14b720a5013813c9d9842cb0a6b90289cf8ec8866d5f82d6a59e79c4eee
sql:
  - engine: "postgresql"
    queries: "database/query.sql"
    schema: "database/schema.sql"
    codegen:
      - plugin: golang
        out: "internal/database"
        options:
          package: "database"
          sql_package: "pgx/v5"
          emit_result_struct_pointers: true
          emit_params_struct_pointers: true
          emit_pointers_for_null_types: true
          emit_json_tags: true

          overrides:
            - column: "artists.external_urls"
              go_type:
                type: "map[string]string"
            - column: "artists.genres"
              go_type:
                type: "[]string"
            - column: "albums.external_urls"
              go_type:
                type: "map[string]string"
            - column: "albums.genres"
              go_type:
                type: "[]string"
            - column: "tracks.external_urls"
              go_type:
                type: "map[string]string"
            - column: "playlists.external_urls"
              go_type:
                type: "map[string]string"


